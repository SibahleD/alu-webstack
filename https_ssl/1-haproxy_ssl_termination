global
  log /dev/log local0
  chroot /var/lib/haproxy
  stats socket /run/haproxy/admin.sock mode 660 level admin
  stats timeout 30s
  user haproxy
  group haproxy
  daemon
  tune.ssl.default-dh-param 2048

defaults
  log     global
  option  httplog
  option  dontlognull
  mode http
  timeout client 15s
  timeout connect 10s
  timeout server 15s
  timeout http-request 10s

frontend https_front
    bind *:443 ssl crt /etc/letsencrypt/live/www.example.com/fullchain.pem crt-key /etc/letsencrypt/live/www.sdforever.tech/fullchain.pem
    mode http
    option httplog
    default_backend web_server

frontend clickviral-tech-frontend
    bind *:80
    default_backend clickviral-tech-backend

backend clickviral-tech-backend
    balance roundrobin
    server 6347-web-01 54.164.133.55:80 check
    server 6347-web-02 54.174.160.165:80 check

backend web_server
    mode http
    server web1 50.16.108.222 check

listen stats
    bind *:8404
    stats enable
    stats uri /stats
    stats auth admin:password
